<div class="screenContent" tabindex="-1" role="dialog">
  <div class="container">
    <div class="col-md-12">

      <div class="row row-eq-height break-flex-at-549 mb">
        <div class="col-md-8  col-sm-6 col-xs-12">
          <div class="panel panel-full-height">
            <div class="panel-body">
              <loading ng-if="$ctrl.profileLoading"></loading>
              <div class="row" ng-if="!$ctrl.profileLoading">
                <div class="col-md-6">
                  <h3 class="mb0 font-weight-mild">{{$ctrl.profile.name}}</h3>
                  <p translate>Account #{{$ctrl.profile.donorNumber}}</a>
                  </p>
                  <div class="">
                    <p class="mb0" translate>Year-to-Date Giving</p>
                    <h3 class="m0 font-weight-mild">{{$ctrl.profile.yearToDate | currency:'$'}}</h3>
                    <p translate>As of {{$ctrl.currentDate | date:'shortDate'}}</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label ng-if="$ctrl.profile.address" translate>Mailing Address:</label>
                    <display-address address="$ctrl.profile.address"></display-address>
                  </div>
                  <div class="form-group mb0">
                    <label ng-if="$ctrl.profile.phone" translate>Contact Phone:</label>
                    <p class="mb0">{{$ctrl.profile.phone}}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4  col-sm-6 col-xs-12">
          <div class="panel panel-full-height">
            <div class="panel-body">
              <!-- Giving Control -->
              <a class="btn btn-block btn-primary" data-toggle="modal" data-target="#addPaymentMethodManageGiving" translate>Edit Your Recurring Gifts</a>
              <a class="btn btn-block btn-primary mb- mt-" data-toggle="modal" data-target="#giveOneTime" translate>Give a 1-Time Gift</a>
              <a class="btn btn-block btn-primary" data-toggle="modal" data-target="#whatTodDoManageGiving" translate>Stop or Restart a Gift</a>
            </div>
          </div>
        </div>

      </div>

      <div class="panel panel-margin-bottom" ng-if="!$ctrl.profileLoading">
        <div class="panel-body">
          <div class="row" style="position: relative;">
            <div class="col-sm-12">
              <h3 translate>Your Giving</h3>
            </div>

            <div class="col-xs-12 col-sm-12">
              <div class="btn-toolbar">
                <div class="btn-group" role="group" aria-label="...">
                  <button type="button"
                          class="btn btn-default"
                          ng-class="{active: $ctrl.view == 'recipient'}"
                          ng-click="$ctrl.setGivingView('recipient')">
                    <span class="visible-xs" translate>By Recipient</span>
                    <span class="hidden-xs" translate>Recipient View</span>
                  </button>
                  <button type="button"
                          class="btn btn-default"
                          ng-class="{active: $ctrl.view == 'historical'}"
                          ng-click="$ctrl.setGivingView('historical')">
                    <span class="visible-xs" translate>By Month</span>
                    <span class="hidden-xs" translate>Monthly View</span>
                  </button>
                </div>

                <div class="btn-group" uib-dropdown role="group" ng-if="$ctrl.view == 'recipient'">
                  <button class="btn btn-default dropdown-toggle" uib-dropdown-toggle>
                    {{$ctrl.recipientFilter == 'recent' ? 'Your Recent Gifts' : $ctrl.recipientFilter | translate}}
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                    <li ng-class="{active: $ctrl.recipientFilter == 'recent'}">
                      <a ng-click="$ctrl.recipientFilter = 'recent'" translate>Your Recent Gifts</a>
                    </li>
                    <li ng-repeat="year in $ctrl.years"
                        ng-class="{active: $ctrl.recipientFilter == year}">
                      <a ng-click="$ctrl.recipientFilter = year">{{year}}</a>
                    </li>
                  </ul>
                </div>

                <div class="btn-group">
                  <div class="btn-group" uib-dropdown role="group" ng-if="$ctrl.view == 'historical'">
                    <button class="btn btn-default dropdown-toggle" uib-dropdown-toggle>
                      {{$ctrl.historicalFilter.year}}
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                      <li ng-repeat="year in $ctrl.years"
                          ng-class="{active: $ctrl.historicalFilter.year == year}">
                        <a ng-click="$ctrl.historicalFilter.year = year">{{year}}</a>
                      </li>
                    </ul>
                  </div>

                  <div class="btn-group" uib-dropdown role="group" ng-if="$ctrl.view == 'historical'">
                    <button class="btn btn-default dropdown-toggle" uib-dropdown-toggle>
                      {{$ctrl.historicalFilter.month.label}}
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                      <li ng-repeat="month in $ctrl.months"
                          ng-class="{active: $ctrl.historicalFilter.month == month}">
                        <a ng-click="$ctrl.historicalFilter.month = month">{{month.label}}</a>
                      </li>
                    </ul>
                  </div>
                </div>

              </div>
            </div>

            <loading-overlay ng-if="$ctrl.viewLoading"></loading-overlay>
          </div>
        </div>
      </div>

      <div ng-switch="$ctrl.view">
        <recipient-view ng-switch-when="recipient"
                               set-loading="$ctrl.setViewLoading(loading)"
                               filter="$ctrl.recipientFilter">
        </recipient-view>
        <historical-view ng-switch-when="historical"
                             set-loading="$ctrl.setViewLoading(loading)"
                             year="$ctrl.historicalFilter.year"
                             month="$ctrl.historicalFilter.month">
        </historical-view>
      </div>

    </div>
  </div>
</div>
