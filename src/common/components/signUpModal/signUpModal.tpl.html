<div class="content">
  <div class="col-md-3 col-xs-12"></div>
  <div class="col-md-6 col-xs-12">
    <div class="alert alert-danger" role="alert" ng-if="$ctrl.submissionError" ng-switch="$ctrl.submissionError">
      <p ng-switch-when="Invalid email address" translate>
        {{'ERROR_SAVING_EMAIL'}}
      </p>
      <p ng-switch-when="Account already exists" translate>
        {{'ERROR_SAVING_ACCOUNT_EXISTS'}}
      </p>      
      <p ng-switch-default translate>
        {{'ERROR_SAVING_CONTACT_TRY_AGAIN'}}
      </p>
    </div>

    <div class="row text-center">
      <div class="col-xs-12">
        <h4 translate>Create Account</h4>
        <p translate>This will invite you to sign up for our website using Okta.  After this, please check your email for an invitation to finish setting up your account, including your contact information and password.</p>
      </div>
    </div>

    <div class="loading-overlay-parent">
      <loading type="overlay" ng-if="$ctrl.loadingDonorDetails">
        <translate>{{'CHECKING_FOR_EXISTING'}}</translate>
      </loading>

      <form novalidate name="$ctrl.signUpForm">
        <div class="row">
          <div class="col-xs-12">
            <div class="form-group is-required" ng-class="{'has-error': ($ctrl.signUpForm.email | showErrors)}">
              <label translate>{{'EMAIL'}}</label>
              <input type="email" class="form-control  form-control-subtle" name="email" ng-model="$ctrl.donorDetails['email']" required ng-maxlength="100" ng-disabled="$ctrl.donorDetails.staff">
              <div role="alert" ng-messages="$ctrl.signUpForm.email.$error" ng-if="($ctrl.signUpForm.email | showErrors)">
                <div class="help-block" ng-message="required" translate>{{'EMAIL_MISSING_ERROR'}}</div>
                <div class="help-block" ng-message="email" translate>{{'EMAIL_INVALID_ERROR'}}</div>
                <div class="help-block" ng-message="maxlength" translate>{{'EMAIL_LENGTH_ERROR'}}</div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <div class="form-group is-required" ng-class="{'has-error': ($ctrl.signUpForm.nameGivenName | showErrors)}">
              <label translate>{{'FIRST_NAME'}}</label>
              <input type="text"
                    class="form-control  form-control-subtle"
                    name="nameGivenName"
                    ng-model="$ctrl.donorDetails['name']['given-name']"
                    required
                    ng-maxlength="50"
                    ng-disabled="$ctrl.nameFieldsDisabled">
              <div role="alert" ng-messages="$ctrl.signUpForm.nameGivenName.$error" ng-if="($ctrl.signUpForm.nameGivenName | showErrors)">
                <div class="help-block" ng-message="required" translate>{{'FIRST_NAME_ERROR'}}</div>
                <div class="help-block" ng-message="maxlength" translate>{{'MAX_LENGTH_FIRST_NAME_ERROR'}}</div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <div class="form-group is-required" ng-class="{'has-error': ($ctrl.signUpForm.nameFamilyName | showErrors)}">
              <label translate>{{'LAST_NAME'}}</label>
              <input type="text"
                    class="form-control  form-control-subtle"
                    name="nameFamilyName"
                    ng-model="$ctrl.donorDetails['name']['family-name']"
                    required
                    ng-maxlength="50"
                    ng-disabled="$ctrl.nameFieldsDisabled">
              <div role="alert" ng-messages="$ctrl.signUpForm.nameFamilyName.$error" ng-if="($ctrl.signUpForm.nameFamilyName | showErrors)">
                <div class="help-block" ng-message="required" translate>{{'LAST_NAME_ERROR'}}</div>
                <div class="help-block" ng-message="maxlength" translate>{{'MAX_LENGTH_LAST_NAME_ERROR'}}</div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <p>* indicates required field</p>
          </div>
        </div>

        <div class="row buttons">
          <div class="col-xs-6">
            <button
              id="submitChangesButton"
              type="button"
              class="btn btn-primary pull-right"
              ng-click="$ctrl.submitDetails()"
              translate
            >
              Register
            </button>
          </div>
          <div class="col-xs-6">
            <a ng-click="$ctrl.onStateChange({state:'sign-in'})" class="back-to-sign-in">Back to sign in</a>
          </div>
        </div>
      </form>
    </div>

    <hr />


    <div class="row bottom-links">
      <div class="col-xs-6">Powered by Okta</div>
      <div class="col-xs-6">
        <a href="https://www.cru.org/us/en/about/privacy.html" target="_blank" rel="noopener" class="pull-right">Privacy Policy</a>
      </div>
    </div>

  </div>
  <div class="col-md-3 col-xs-12"></div>
</div>

