
<div class="alert alert-danger" role="alert" ng-if="$ctrl.submissionError">
  <p>{{$ctrl.submissionError | translate}}</p>
</div>

<div ng-if="$ctrl.donorDetails" class="loading-overlay-parent">
  <loading type="overlay" ng-if="!$ctrl.donorDetails">
    <translate>Checking for existing information...</translate>
  </loading>
  <div class="mb_x">
    <div class="row">
      <div class="col-md-6">
        <a href="" class="tab-btn btn btn-default btn-block" ng-click="$ctrl.donorDetails['donor-type'] = 'Household'" ng-class="{'on': $ctrl.donorDetails['donor-type'] === 'Household'}" translate>Give as an Individual</a>
      </div>
      <div class="col-md-6">
        <a href="" class="tab-btn btn btn-default btn-block" ng-click="$ctrl.donorDetails['donor-type'] = 'Organization'" ng-class="{'on': $ctrl.donorDetails['donor-type'] === 'Organization'}" translate>Give as an Organization</a>
      </div>
    </div>
  </div>

  <form novalidate ng-keyup="$event.key === 'Enter' && $ctrl.submitDetails()" name="$ctrl.detailsForm">
    <div class="mb">
      <h4 class="panel-title  border-bottom-small  visible" translate>Your Information</h4>

      <div class="row" ng-if="$ctrl.showTitle">
        <div class="col-sm-6">
          <div class="form-group  form-group-default">
            <label translate>Title</label>
            <select class="form-control  form-control-subtle" ng-model="$ctrl.donorDetails['name']['title']">
              <option></option>
              <option value="Mr" translate>Mr</option>
              <option value="Mrs" translate>Mrs</option>
              <option value="Miss" translate>Miss</option>
              <option value="Ms" translate>Ms</option>
              <option value="Dr" translate>Dr</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div class="form-group is-required" ng-class="{'has-error': ($ctrl.detailsForm.nameGivenName | showErrors)}">
            <label translate>First Name</label>
            <input type="text"
                   class="form-control  form-control-subtle"
                   name="nameGivenName"
                   ng-model="$ctrl.donorDetails['name']['given-name']"
                   required
                   ng-maxlength="50"
                   ng-disabled="$ctrl.nameFieldsDisabled">
            <div role="alert" ng-messages="$ctrl.detailsForm.nameGivenName.$error" ng-if="($ctrl.detailsForm.nameGivenName | showErrors)">
              <div class="help-block" ng-message="required" translate>You must enter a first name</div>
              <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 50 characters</div>
            </div>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group" ng-class="{'has-error': ($ctrl.detailsForm.nameMiddleInitial | showErrors)}">
            <label translate>MI</label>
            <input type="text"
                   class="form-control  form-control-subtle"
                   name="nameMiddleInitial"
                   ng-model="$ctrl.donorDetails['name']['middle-initial']"
                   ng-maxlength="50">
            <div role="alert" ng-messages="$ctrl.detailsForm.nameMiddleInitial.$error" ng-if="($ctrl.detailsForm.nameMiddleInitial | showErrors)">
              <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 50 characters</div>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group is-required" ng-class="{'has-error': ($ctrl.detailsForm.nameFamilyName | showErrors)}">
            <label translate>Last Name</label>
            <input type="text"
                   class="form-control  form-control-subtle"
                   name="nameFamilyName"
                   ng-model="$ctrl.donorDetails['name']['family-name']"
                   required
                   ng-maxlength="50"
                   ng-disabled="$ctrl.nameFieldsDisabled">
            <div role="alert" ng-messages="$ctrl.detailsForm.nameFamilyName.$error" ng-if="($ctrl.detailsForm.nameFamilyName | showErrors)">
              <div class="help-block" ng-message="required" translate>You must enter a last name</div>
              <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 50 characters</div>
            </div>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label translate>Suffix</label>
            <div class="form-group">
              <select class="form-control  form-control-subtle" ng-model="$ctrl.donorDetails['name']['suffix']">
                <option></option>
                <option translate>Jr</option>
                <option translate>Sr</option>
                <option translate>II</option>
                <option translate>III</option>
                <option translate>IV</option>
              </select>
            </div>
          </div>
        </div>

      </div>

      <div class="row">
        <div class="col-sm-6">
          <div class="form-group" ng-class="{'has-error': ($ctrl.detailsForm.phoneNumber | showErrors)}">
            <label translate>Phone</label>
            <input type="text" class="form-control  form-control-subtle" name="phoneNumber" ng-model="$ctrl.donorDetails['phone-number']" ng-maxlength="100">
            <div role="alert" ng-messages="$ctrl.detailsForm.phoneNumber.$error" ng-if="($ctrl.detailsForm.phoneNumber | showErrors)">
              <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 100 characters</div>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group is-required" ng-class="{'has-error': ($ctrl.detailsForm.email | showErrors)}">
            <label translate>Email Address</label>
            <input type="email" class="form-control  form-control-subtle" name="email" ng-model="$ctrl.donorDetails['email']" required ng-maxlength="100">
            <div role="alert" ng-messages="$ctrl.detailsForm.email.$error" ng-if="($ctrl.detailsForm.email | showErrors)">
              <div class="help-block" ng-message="required" translate>You must enter an email address</div>
              <div class="help-block" ng-message="email" translate>This email address is not valid</div>
              <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 100 characters</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mb_x">
      <div class="panel panel-default" ng-if="$ctrl.donorDetails['donor-type'] === 'Household'">
        <div class="panel-title  panel-heading visible" ng-click="showSpouseDetails = !showSpouseDetails" translate>
          Spouse Name (Optional)
        </div>
        <div class="panel-collapse collapse in" ng-if="showSpouseDetails">
          <div class="panel-body">
            <div class="row">
              <div class="col-sm-6">
                <div class="form-group">
                  <label translate>Title</label>
                  <div class="form-group">
                    <select class="form-control  form-control-subtle" ng-model="$ctrl.donorDetails['spouse-name']['title']">
                      <option></option>
                      <option value="Mr" translate>Mr</option>
                      <option value="Mrs" translate>Mrs</option>
                      <option value="Miss" translate>Miss</option>
                      <option value="Ms" translate>Ms</option>
                      <option value="Dr" translate>Dr</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>


            <div class="row">
              <div class="col-sm-4">
                <div class="form-group" ng-class="{'has-error': ($ctrl.detailsForm.spouseGivenName | showErrors)}">
                  <label translate>First Name</label>
                  <input type="text"
                         class="form-control  form-control-subtle"
                         name="spouseGivenName"
                         ng-model="$ctrl.donorDetails['spouse-name']['given-name']"
                         ng-maxlength="50"
                         ng-disabled="$ctrl.nameFieldsDisabled">
                  <div role="alert" ng-messages="$ctrl.detailsForm.spouseGivenName.$error" ng-if="($ctrl.detailsForm.spouseGivenName | showErrors)">
                    <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 50 characters</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group" ng-class="{'has-error': ($ctrl.detailsForm.spouseMiddleInitial | showErrors)}">
                  <label translate>MI</label>
                  <input type="text" class="form-control  form-control-subtle" name="spouseMiddleInitial" ng-model="$ctrl.donorDetails['spouse-name']['middle-initial']" ng-maxlength="50">
                  <div role="alert" ng-messages="$ctrl.detailsForm.spouseMiddleInitial.$error" ng-if="($ctrl.detailsForm.spouseMiddleInitial | showErrors)">
                    <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 50 characters</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="form-group" ng-class="{'has-error': ($ctrl.detailsForm.spouseFamilyName | showErrors)}">
                  <label translate>Last Name</label>
                  <input type="text"
                         class="form-control  form-control-subtle"
                         name="spouseFamilyName"
                         ng-model="$ctrl.donorDetails['spouse-name']['family-name']"
                         ng-maxlength="50"
                         ng-disabled="$ctrl.nameFieldsDisabled">
                  <div role="alert" ng-messages="$ctrl.detailsForm.spouseFamilyName.$error" ng-if="($ctrl.detailsForm.spouseFamilyName | showErrors)">
                    <div class="help-block" ng-message="maxlength" translate>This field cannot be longer than 50 characters</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group">
                  <label translate>Suffix</label>
                  <div class="form-group">
                    <select class="form-control  form-control-subtle" ng-model="$ctrl.donorDetails['spouse-name']['suffix']">
                      <option></option>
                      <option translate>Jr</option>
                      <option translate>Sr</option>
                      <option translate>II</option>
                      <option translate>III</option>
                      <option translate>IV</option>
                    </select>
                  </div>
                </div>
              </div>


            </div>
          </div><!-- // panel-body -->
        </div>
      </div>
    </div>

    <div class="mb">
      <h4 class="panel-title  border-bottom-small  visible" translate>Mailing Address</h4>
      <div class="row" ng-if="$ctrl.donorDetails['donor-type'] === 'Organization'">
        <div class="col-sm-12">
          <div class="form-group is-required" ng-class="{'has-error': ($ctrl.detailsForm.orgName | showErrors)}">
            <label translate>Organization Name</label>
            <input type="text" class="form-control  form-control-subtle" name="orgName" ng-model="$ctrl.donorDetails['organization-name']" required>
            <div role="alert" ng-messages="$ctrl.detailsForm.orgName.$error" ng-if="($ctrl.detailsForm.orgName | showErrors)">
              <div class="help-block" ng-message="required" translate>You must enter an organization name</div>
            </div>
          </div>
        </div>
      </div>
      <address-form address="$ctrl.donorDetails.mailingAddress" parent-form="$ctrl.detailsForm"></address-form>
    </div>
  </form>
</div>
